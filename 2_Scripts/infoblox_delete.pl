#=====================================================================================================================#

#!/usr/bin/perl
use strict;
use Infoblox;

#========================================================== CONNECTION ===============================================#

my $session = Infoblox::Session->new( master => "10.1.1.104", username => "webapi", password => "123456" );

if_error_occurs_abort();

#========================================================== REMOVE_IP ================================================#

my @ip_list = $session->get( object    => "Infoblox::DHCP::FixedAddr",
	 		 	                     mac       => "00:00:00:00:00:00",
	 			                     ipv4addr  => $ARGV[0] );

if($ip_list[0])
{
	my $res_Remove = $session->remove($ip_list[0]);	
		
	if_error_occurs_abort();
}

#========================================================== SUCCESS ==================================================#

print "\nINFOBLOX_DELETE_OK\n\n";

#========================================================== ERRORS ===================================================#

sub if_error_occurs_abort
{
	if ($session->status_code()) 
	{
	   die( "ERROR(", $session->status_code(). "): " . $session->status_detail() . "\n" );
	}
}

#=====================================================================================================================#