#=====================================================================================================================#

#!/usr/bin/perl
use strict;
use Infoblox;
use Net::Ping;

#========================================================== CONNECTION ===============================================#

my $session = Infoblox::Session->new( master => "10.1.1.104", username => "webapi", password => "123456" );

if_error_occurs_abort();

#========================================================== PING_IP ==================================================#

my $p = Net::Ping->new("udp",1,64 );

if ($p->ping($ARGV[0]))
{
	print "\nINFOBLOX_PING_OK\n\n";
}
else
{
	print "\nINFOBLOX_PING_ERROR\n\n";
}

#========================================================== ERRORS ===================================================#

sub if_error_occurs_abort
{
	if ($session->status_code()) 
	{
	   die( "ERROR(", $session->status_code(). "): " . $session->status_detail() . "\n" );
	}
}

#=====================================================================================================================#